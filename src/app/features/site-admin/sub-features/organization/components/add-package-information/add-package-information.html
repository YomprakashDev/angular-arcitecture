<!-- Package Card -->
<div class="p-6">
  <form [formGroup]="formGroup" class="grid grid-cols-1 gap-4 md:gap-5 lg:grid-cols-12" novalidate>
    <!-- Package -->
    <div class="lg:col-span-4">
      <label class="form-label">Package <span class="req">*</span></label>
      <div class="relative">
        <select formControlName="packageID" class="form-select" autocomplete="off" aria-label="Select package">
          <option [ngValue]="null" selected>Select package</option>
          <option *ngFor="let p of packages" [ngValue]="p.id">{{ p.name }}</option>
        </select>
        <svg class="chev" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z" clip-rule="evenodd"/>
        </svg>
      </div>
      @if (isInvalid('packageID')) {
        <p class="mt-1 text-xs text-red-600">Package is required.</p>
      }
    </div>

    <!-- Users Count -->
    <div class="lg:col-span-4">
      <label class="form-label">Users Count <span class="req">*</span></label>
      <input
        formControlName="noOfUsers" 
        type="number"
        inputmode="numeric"
        placeholder="Enter"
        class="form-input"
        min="1"
        aria-label="Users count" />
      @if (isInvalid('noOfUsers')) {
        <p class="mt-1 text-xs text-red-600">Enter at least 1 user.</p>
      }
    </div>

    <!-- PUC -->
    <div class="lg:col-span-4">
      <label class="form-label">PUC</label>
      <input
        formControlName="puc"
        type="number"
        inputmode="decimal"
        class="form-input"
        min="0"
        aria-label="Per-user cost" />
    </div>

    <!-- Deal Amount -->
    <div class="lg:col-span-4">
      <label class="form-label">Deal Amount <span class="req">*</span></label>
      <input
        formControlName="dealAmount"
        type="number"
        inputmode="decimal"
        placeholder="Enter"
        class="form-input"
        min="0"
        aria-label="Deal amount" />
      @if (isInvalid('dealAmount')) {
        <p class="mt-1 text-xs text-red-600">Deal amount is required.</p>
      }
    </div>

    <!-- GST -->
    <div class="lg:col-span-4">
      <label class="form-label">GST</label>
      <input
        formControlName="gst"
        type="number"
        inputmode="decimal"
        class="form-input"
        min="0"
        aria-label="GST (percent or absolute)" />
    </div>

    <!-- Total Deal Value (read-only, computed in TS if you want) -->
    <div class="lg:col-span-4">
      <label class="form-label">Total Deal Value</label>
      <input type="number" inputmode="decimal" class="form-input" readonly aria-readonly="true" aria-label="Total deal value" />
    </div>

    <!-- Start Date -->
    <div class="lg:col-span-4">
      <label class="form-label">Start Date <span class="req">*</span></label>
      <div class="relative">
        <input
          formControlName="validFrom"
          type="date"
          class="form-input pr-10"
          placeholder="dd-MM-yyyy"
          inputmode="numeric"
          autocomplete="off"
          aria-label="Start date" />
        <svg class="cal" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke-width="1.5"></rect>
          <line x1="16" y1="2.5" x2="16" y2="6" stroke-width="1.5"></line>
          <line x1="8" y1="2.5" x2="8" y2="6" stroke-width="1.5"></line>
          <line x1="3" y1="10" x2="21" y2="10" stroke-width="1.5"></line>
        </svg>
      </div>
      @if (isInvalid('validFrom')) {
        <p class="mt-1 text-xs text-red-600">Start date is required.</p>
      }
    </div>

    <!-- Valid Upto -->
    <div class="lg:col-span-4">
      <label class="form-label">Valid Upto <span class="req">*</span></label>
      <div class="relative">
        <input
          formControlName="validTo"
          type="date"
          class="form-input pr-10"
          placeholder="dd-MM-yyyy"
          inputmode="numeric"
          autocomplete="off"
          aria-label="Valid upto date" />
        <svg class="cal" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke-width="1.5"></rect>
          <line x1="16" y1="2.5" x2="16" y2="6" stroke-width="1.5"></line>
          <line x1="8" y1="2.5" x2="8" y2="6" stroke-width="1.5"></line>
          <line x1="3" y1="10" x2="21" y2="10" stroke-width="1.5"></line>
        </svg>
      </div>
      @if (isInvalid('validTo')) {
        <p class="mt-1 text-xs text-red-600">Valid upto is required.</p>
      }
    </div>
  </form>
</div>
