<app-card>
  <div class="p-6">
    <!-- Header -->
    <div class="flex items-center justify-between mb-4 font-[mulish]">
      <h1 class="text-xl font-bold text-primary-black">Tags Types</h1>

      <app-button [text]="'Add Tag Type'" (clicked)="isAddingNewTag.set(true)">
        <lucide-angular [img]="icons.plus"></lucide-angular>
      </app-button>
    </div>

    <div class="flex items-center justify-end mb-4 gap-4">
      <div class="relative w-72">
        <label class="sr-only" for="org-search">Search organizations</label>
        <lucide-angular
          [img]="icons.search"
          class="absolute left-1 top-1/2 -translate-y-1/2 text-gray-subtleAlt text-xs"
        ></lucide-angular>
        <input
          type="text"
          id="org-search"
          placeholder="Search organizations"
          class="block w-full py-2 pl-10 pr-4 text-gray-900 border border-gray-300 rounded-md bg-transparent"
        />
      </div>
    </div>

    <!-- Card + Material table -->
    <div class="overflow-hidden rounded-xl border border-white-gray bg-white">
      <table mat-table [dataSource]="tagsData()" class="w-full mat-elevation-z0 text-sm">
        <!-- Actions -->
        <ng-container matColumnDef="actions">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="px-4 py-3 font-bold font-[mulish] text-gray-subtle bg-gray-surfaceAlt w-[120px]"
          >
            Actions
          </th>
          <td mat-cell *matCellDef="let r" class="px-4 py-3">
            <div class="flex items-center gap-3">
              <!-- edit -->
              <button (click)="isEditingTag.set(true)" aria-label="Edit">
                <lucide-angular class="text-gray-subtleAlt w-5" [img]="icons.edit"></lucide-angular>
              </button>

              <!-- delete -->
              <button aria-label="Delete">
                <lucide-angular
                  class="text-gray-subtleAlt w-5"
                  [img]="icons.delete"
                ></lucide-angular>
              </button>
            </div>
          </td>
        </ng-container>

        <!-- Status (visual toggle only) -->
        <ng-container matColumnDef="status">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="px-4 py-3 font-bold font-[mulish] text-gray-subtle bg-gray-surfaceAlt w-[120px]"
          >
            Status
          </th>
          <td mat-cell *matCellDef="let r" class="px-4 py-3">
            <app-toggle-switch></app-toggle-switch>
          </td>
        </ng-container>

        <!-- Tag Type -->
        <ng-container matColumnDef="tagType">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="px-4 py-3 font-bold font-[mulish] text-gray-subtle bg-gray-surfaceAlt"
          >
            Tag Type
          </th>
          <td
            mat-cell
            *matCellDef="let r"
            class="px-4 py-3 font-normal font-[mulish] text-black text-sm"
          >
            {{ r.tagName }}
          </td>
        </ng-container>

        <!-- Contracts Tagged -->
        <ng-container matColumnDef="contractsTagged">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="px-4 py-3 font-bold font-[mulish] text-gray-subtle bg-gray-surfaceAlt"
          >
            Contracts Tagged
          </th>
          <td mat-cell *matCellDef="let r" class="px-4 py-3 text-[#1D1D21]">
            {{ 0 }}
          </td>
        </ng-container>

        <!-- Rows -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns" class="!bg-[#F6F8FB]"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          class="odd:bg-white even:bg-[#F9FAFC]"
        ></tr>
      </table>
    </div>
  </div>
</app-card>

@if(isAddingNewTag()){
<app-modal
  [modelContainerClass]="'max-w-[450px]'"
  [modalBodyClass]="'bg-white'"
  [isOpen]="isAddingNewTag()"
  (closed)="isAddingNewTag.set(false)"
  [title]="'Add New Tag'"
  (save)="addNewTag()"
>
  <div class="bg-surface-raised2 p-4 rounded-lg">
    <label class="form-lable form-lable-required">Tag Type</label>
    <input [(ngModel)]="tagName" type="text" class="form-input" placeholder="Tag Type" />
  </div>
</app-modal>
} @if(isEditingTag()){
<app-modal
  [modelContainerClass]="'max-w-xl'"
  [isOpen]="isEditingTag()"
  (closed)="isEditingTag.set(false)"
  [title]="'Edit Tag'"
>
  <div>
    <label class="block text-[#6B7280] text-sm font-medium mb-1">Tag Type</label>
    <input
      type="text"
      class="border-[#E5E7EB] border rounded-md py-2 px-3 w-full focus:outline-none focus:border-indigo-500"
      placeholder="Edit Type"
    />
  </div>
</app-modal>
}
